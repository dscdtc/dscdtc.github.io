<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="blog, web, security, front-end"><meta name="author" content="dscdtc"><meta property="og:title" content="Python高效编程"><meta property="og:description" content="blog, web, security, front-end"><meta property="og:site_name" content="城  野"><meta property="og:type" content="article"><meta name="twitter:card" content="summary"><script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script><link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet"><title>Python高效编程 - 城 野</title><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous"><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet"><!--[if lt IE 9]><script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script><![endif]--><link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" rel="stylesheet"><link rel="stylesheet" href="/css/style.css"><style>.pace .pace-progress{background:#6cf;height:3px}.pace .pace-progress-inner{box-shadow:0 0 10px #6cf,0 0 5px #6cf}.pace .pace-activity{border-top-color:#6cf;border-left-color:#6cf}</style><script>!function(t,e,o,c,i,a,n){t.DaoVoiceObject=i,t[i]=t[i]||function(){(t[i].q=t[i].q||[]).push(arguments)},t[i].l=1*new Date,a=e.createElement("script"),n=e.getElementsByTagName("script")[0],a.async=1,a.src=c,a.charset="utf-8",n.parentNode.insertBefore(a,n)}(window,document,0,("https:"==document.location.protocol?"https:":"http:")+"//widget.daovoice.io/widget/771b3406.js","daovoice"),daovoice("init",{app_id:"771b3406"}),daovoice("update")</script></head><body><div class="bg-gradient"></div><div class="bg-pattern"></div><div id="corner"><a href="https://github.com/dscdtc" class="github-corner" aria-label="View source on Github" title="Welcome to my Github!!!"><svg width="80" height="80" viewbox="0 0 250 250" class="octocat" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a></div><div class="menu-bg"><div class="menu-container"><ul><li class="menu-item"><a href="/">Home</a></li><li class="menu-item"><a href="/archives">Archives</a></li><li class="menu-item"><a href="/about.html">About</a></li><li class="menu-item"><a href="/tags">Tags</a></li><li class="menu-item"><a href="/categories">Categories</a></li><li class="menu-item"><a href="/contact.html">Contact</a></li></ul><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="298" height="52" src="//music.163.com/outchain/player?type=0&id=688474010&auto=1&height=32"></iframe></div></div><nav><a href="#menu"></a></nav><div class="container"><div class="row"><div class="col-sm-12"><header><div class="logo"><a href="/"><i class="logo-icon fa fa-codepen" aria-hidden="true"></i></a></div></header><section class="main"><div class="post"><div class="post-header"><h1 class="title"><a href="/Python高效编程.html">Python高效编程</a></h1><div class="post-info"><span class="date">2018-01-20</span><span class="post-count"><i class="fa fa-pencil-square-o"></i> 本篇共537字</span> |<span class="post-count"><i class="fa fa-history"></i> 阅读需要3分钟</span></div></div><div class="content"><blockquote><p>本篇记录汇总实际编程和面试中都可能会遇到的典型问题。</p></blockquote><a id="more"></a><h2 id="在列表-字典-集合中根据条件筛选数据"><a href="#在列表-字典-集合中根据条件筛选数据" class="headerlink" title="在列表,字典,集合中根据条件筛选数据"></a>在列表,字典,集合中根据条件筛选数据</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint</div><div class="line"><span class="keyword">from</span> timeit <span class="keyword">import</span> timeit</div><div class="line">​</div><div class="line">data = [randint(<span class="number">-10</span>,<span class="number">10</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">10</span>)]</div><div class="line"></div><div class="line">filter(<span class="keyword">lambda</span> x:x &gt;= <span class="number">0</span>,data)</div><div class="line"><span class="comment">#首选列表解析 时间比filter少一半左右</span></div><div class="line">[x <span class="keyword">for</span> x <span class="keyword">in</span> data <span class="keyword">if</span> x &gt;= <span class="number">0</span>]</div><div class="line">​</div><div class="line">data = &#123;x:randint(<span class="number">60</span>,<span class="number">100</span>) <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">21</span>)&#125;</div><div class="line">&#123;k:v <span class="keyword">for</span> k,v <span class="keyword">in</span> data.items() <span class="keyword">if</span> v &gt; <span class="number">90</span>&#125;</div><div class="line">​</div><div class="line">data = set(data)</div><div class="line">&#123;x <span class="keyword">for</span> x <span class="keyword">in</span> data <span class="keyword">if</span> x%<span class="number">3</span>==<span class="number">0</span>&#125;</div></pre></td></tr></table></figure><h2 id="为元组-列表中每个元素命名-提高程序的可读性"><a href="#为元组-列表中每个元素命名-提高程序的可读性" class="headerlink" title="为元组/列表中每个元素命名,提高程序的可读性"></a>为元组/列表中每个元素命名,提高程序的可读性</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#第一种</span></div><div class="line">NAME,AGE,SEX,EMAIL = range(<span class="number">4</span>)</div><div class="line">student = (<span class="string">'Jan'</span>,<span class="number">14</span>,<span class="string">'male'</span>,<span class="string">'jan@jan.net'</span>)</div><div class="line">print(student[NAME])</div><div class="line"></div><div class="line"><span class="comment">#第二种</span></div><div class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> namedtuple</div><div class="line">Student = namedtuple(<span class="string">'Student'</span>,[<span class="string">'name'</span>,<span class="string">'age'</span>,<span class="string">'sex'</span>,<span class="string">'email'</span>])</div><div class="line">student= Student(<span class="string">'Jan'</span>,<span class="number">14</span>,<span class="string">'male'</span>,<span class="string">'jan@jan.net'</span>)</div><div class="line">print(student[NAME])</div><div class="line">student.age</div><div class="line">isinstance(student,tuple)</div></pre></td></tr></table></figure><h2 id="统计序列中元素的出现频度"><a href="#统计序列中元素的出现频度" class="headerlink" title="统计序列中元素的出现频度"></a>统计序列中元素的出现频度</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint</div><div class="line">data = [randint(<span class="number">1</span>,<span class="number">10</span>) <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">20</span>)]</div><div class="line">c = dict.fromkeys(data,<span class="number">0</span>)</div><div class="line"></div><div class="line"><span class="comment">#第一种</span></div><div class="line"><span class="keyword">for</span> x <span class="keyword">in</span> data:</div><div class="line">    c[x]+=<span class="number">1</span></div><div class="line"></div><div class="line"><span class="comment">#第二种</span></div><div class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</div><div class="line">c2 = Counter(data)</div><div class="line"><span class="comment">#出现频度最高的三个</span></div><div class="line">c2.most_common(<span class="number">3</span>)</div><div class="line"></div><div class="line"><span class="comment">#统计一篇文章中单词出现次数</span></div><div class="line"><span class="keyword">import</span> re</div><div class="line"><span class="comment">#导入Python之禅</span></div><div class="line"><span class="keyword">import</span> this</div><div class="line">c3 = Counter(re.split(<span class="string">'\W+'</span>,this.s))</div></pre></td></tr></table></figure><h2 id="根据字典中值的大小-对字典中的项排序"><a href="#根据字典中值的大小-对字典中的项排序" class="headerlink" title="根据字典中值的大小,对字典中的项排序"></a>根据字典中值的大小,对字典中的项排序</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint</div><div class="line">data = &#123;x:randint(<span class="number">60</span>,<span class="number">100</span>) <span class="keyword">for</span> x <span class="keyword">in</span> <span class="string">'abcdefg'</span>&#125;</div><div class="line"><span class="comment">#sorted(data.values())</span></div><div class="line"></div><div class="line"><span class="comment">#第一种</span></div><div class="line">t = zip(data.values(),data.keys())</div><div class="line">sorted(t)</div><div class="line"></div><div class="line"><span class="comment">#第二种</span></div><div class="line">sorted(data.items(),key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>])</div></pre></td></tr></table></figure><h2 id="快速找到多个字典中的公共键-key"><a href="#快速找到多个字典中的公共键-key" class="headerlink" title="快速找到多个字典中的公共键(key)"></a>快速找到多个字典中的公共键(key)</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint,sample</div><div class="line"></div><div class="line">s1 = &#123;x: randint(<span class="number">1</span>,<span class="number">4</span>) <span class="keyword">for</span> x <span class="keyword">in</span> sample(<span class="string">'abcdefgh'</span>,randint(<span class="number">3</span>,<span class="number">6</span>))&#125;</div><div class="line">s2 = &#123;x: randint(<span class="number">1</span>,<span class="number">4</span>) <span class="keyword">for</span> x <span class="keyword">in</span> sample(<span class="string">'abcdefgh'</span>,randint(<span class="number">3</span>,<span class="number">6</span>))&#125;</div><div class="line">s3 = &#123;x: randint(<span class="number">1</span>,<span class="number">4</span>) <span class="keyword">for</span> x <span class="keyword">in</span> sample(<span class="string">'abcdefgh'</span>,randint(<span class="number">3</span>,<span class="number">6</span>))&#125;</div><div class="line"></div><div class="line"><span class="comment">#第一种</span></div><div class="line">res = []</div><div class="line"><span class="keyword">for</span> k <span class="keyword">in</span> s1:</div><div class="line">    <span class="keyword">if</span> k <span class="keyword">in</span> s2 <span class="keyword">and</span> k <span class="keyword">in</span> s3:</div><div class="line">        res.append(k)</div><div class="line"></div><div class="line"><span class="comment">#第二种</span></div><div class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</div><div class="line"></div><div class="line">s1.keys()&amp;s2.keys()&amp;s3.keys()</div><div class="line">map(dict.keys,[s1,s2,s3])</div><div class="line">reduce(<span class="keyword">lambda</span> a, b:a &amp; b,map(dict.keys,[s1,s2,s3]))</div></pre></td></tr></table></figure><h2 id="实现用户的历史记录功能-最多n条"><a href="#实现用户的历史记录功能-最多n条" class="headerlink" title="实现用户的历史记录功能(最多n条)"></a>实现用户的历史记录功能(最多n条)</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</div><div class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint</div><div class="line"></div><div class="line">N = randint(<span class="number">0</span>,<span class="number">100</span>)</div><div class="line"><span class="comment">## 一个容纳5个值的队列</span></div><div class="line">history = deque([],<span class="number">5</span>)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">guess</span><span class="params">(k)</span>:</span></div><div class="line">    <span class="keyword">if</span> k == N:</div><div class="line">        print(<span class="string">'right!'</span>)</div><div class="line">        <span class="keyword">return</span> <span class="keyword">True</span></div><div class="line">    <span class="keyword">if</span> k &lt; N:</div><div class="line">        print(<span class="string">'%s is less than N'</span>%k)</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        print(<span class="string">'%s is greater than N'</span>%k)</div><div class="line">    <span class="keyword">return</span> <span class="keyword">False</span></div><div class="line"></div><div class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">    input_number = input(<span class="string">'please input a number: '</span>)</div><div class="line">    <span class="keyword">if</span> input_number.isdigit():</div><div class="line">        k = int(input_number)</div><div class="line">        history.append(k)</div><div class="line">        <span class="keyword">if</span> guess(k):</div><div class="line">            <span class="keyword">break</span></div><div class="line">    <span class="keyword">elif</span> input_number == <span class="string">'history'</span>:</div><div class="line">        print(list(history))</div></pre></td></tr></table></figure><h3 id="未完待续…"><a href="#未完待续…" class="headerlink" title="未完待续…"></a>未完待续…</h3><div style="text-align:center;padding:32px 0;color:#ccc;font-size:14px">-------------本文到此结束&nbsp;<i class="fa fa-university"></i>&nbsp;感谢您的阅读-------------</div></div><div class="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC8zMzAwNS85NTY3"><script>!function(e,t){var c,n=e.getElementsByTagName("script")[0];"function"!=typeof LivereTower&&((c=e.createElement("script")).src="https://cdn-city.livere.com/js/embed.dist.js",c.async=!0,n.parentNode.insertBefore(c,n))}(document)</script><noscript>为正常使用评论功能请激活JavaScript</noscript></div></div></div></section></div></div></div><div class="push"></div><footer class="footer-content"><div class="container"><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about"><h2>About</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;The world ain’t all sunshine and rainbows. It's a very mean and nasty place and I don't care how tough you are, it will beat you to your knees and keep you there permanently if you let it. You, me or nobody, is gonna hit as hard as life. But it ain’t about how hard you hit.It's about how hard you can get hit and keep moving forward. How much you can take，and keep moving forward!!</p></div><div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts"><h2>Recent Posts</h2><ul><li><a class="footer-post" href="/Python高效编程.html">Python高效编程</a></li><li><a class="footer-post" href="/Python中的天坑-dict.html">Python中的天坑--dict</a></li><li><a class="footer-post" href="/re踩坑之旅.html">re踩坑之旅</a></li><li><a class="footer-post" href="/优雅的Python之fotmat.html">Python 优雅编程之 str.format()</a></li></ul></div><div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 footer-categories"><h2>Categories</h2><ul><li><a class="footer-post" href="/categories/Git/">Git</a></li><li><a class="footer-post" href="/categories/Javascript/">Javascript</a></li><li><a class="footer-post" href="/categories/Python/">Python</a></li></ul></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><ul class="list-inline footer-social-icons"><li class="list-inline-item"><a href="https://github.com/dscdtc/"><span class="footer-icon-container"><i class="fa fa-github"></i></span></a></li><li class="list-inline-item"><a href="dscdtc"><span class="footer-icon-container"><i class="fa fa-weixin"></i></span></a></li><li class="list-inline-item"><a href="mailto:dscdtc@protonmail.com"><span class="footer-icon-container"><i class="fa fa-envelope-o"></i></span></a></li><li class="list-inline-item"><a href="/atom.xml"><span class="footer-icon-container"><i class="fa fa-rss"></i></span></a></li></ul></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><div class="footer-copyright">Copyright ©2018 <a href="https://github.com/dscdtc">dscdtc</a>. All right reserved</div><div class="powered-by"><span id="busuanzi_container_site_pv" style="display:none"><i class="fa fa-users"></i> 恭喜您是第<span id="busuanzi_value_site_uv"></span>位访客 |</span><span id="busuanzi_container_site_pv" style="display:none"><i class="fa fa-thermometer-full"></i> 本站访问量达<span id="busuanzi_value_site_pv"></span>人次 |</span><span class="post-count"><i class="fa fa-user-md"></i> 博客全站共9.3k字</span></div></div></div></div></footer><script src="//code.jquery.com/jquery-2.1.4.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" charset="utf-8"></script><script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="/js/main.js"></script><script src="/js/love.js"></script><canvas class="fireworks" style="position:fixed;left:0;top:0;z-index:1;pointer-events:none"></canvas><script src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script><script src="/js/firework.js"></script><script color="215,236,255" opacity="0.7" zindex="-2" count="99" src="//cdn.bootcss.com/canvas-nest.js/1.0.1/canvas-nest.min.js"></script><div id="hexo-helper-live2d"><canvas id="live2dcanvas" width="150" height="300"></canvas></div><style>#live2dcanvas{position:fixed;width:150px;height:300px;opacity:.7;right:0;z-index:999;pointer-events:none;bottom:20px}</style><script src="/live2d/device.min.js"></script><script>const loadScript = function loadScript(c,b){var a=document.createElement("script");a.type="text/javascript";"undefined"!=typeof b&&(a.readyState?a.onreadystatechange=function(){if("loaded"==a.readyState||"complete"==a.readyState)a.onreadystatechange=null,b()}:a.onload=function(){b()});a.src=c;document.body.appendChild(a)};
(function(){
  if((typeof(device) != 'undefined') && (device.mobile())){
    document.getElementById("live2dcanvas").style.width = '75px';
    document.getElementById("live2dcanvas").style.height = '150px';
  }else
    if (typeof(device) === 'undefined') console.error('Cannot find current-device script.');
  loadScript("/live2d/script.js", function(){loadlive2d("live2dcanvas", "/live2d/assets/miku.model.json", 0.5);});
})();</script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script></body></html>