<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="blog, web, security, front-end"><meta name="author" content="dscdtc"><meta property="og:title" content="对js逻辑运算符的总结"><meta property="og:description" content="blog, web, security, front-end"><meta property="og:site_name" content="城  野"><meta property="og:type" content="article"><meta name="twitter:card" content="summary"><script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script><link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet"><title>对js逻辑运算符的总结 - 城 野</title><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous"><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet"><!--[if lt IE 9]><script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script><![endif]--><link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" rel="stylesheet"><link rel="stylesheet" href="/css/style.css"><style>.pace .pace-progress{background:#6cf;height:3px}.pace .pace-progress-inner{box-shadow:0 0 10px #6cf,0 0 5px #6cf}.pace .pace-activity{border-top-color:#6cf;border-left-color:#6cf}</style><script>!function(t,e,o,c,i,a,n){t.DaoVoiceObject=i,t[i]=t[i]||function(){(t[i].q=t[i].q||[]).push(arguments)},t[i].l=1*new Date,a=e.createElement("script"),n=e.getElementsByTagName("script")[0],a.async=1,a.src=c,a.charset="utf-8",n.parentNode.insertBefore(a,n)}(window,document,0,("https:"==document.location.protocol?"https:":"http:")+"//widget.daovoice.io/widget/771b3406.js","daovoice"),daovoice("init",{app_id:"771b3406"}),daovoice("update")</script></head><body><div class="bg-gradient"></div><div class="bg-pattern"></div><div id="corner"><a href="https://github.com/dscdtc" class="github-corner" aria-label="View source on Github" title="Welcome to my Github!!!"><svg width="80" height="80" viewbox="0 0 250 250" class="octocat" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a></div><div class="menu-bg"><div class="menu-container"><ul><li class="menu-item"><a href="/">Home</a></li><li class="menu-item"><a href="/archives">Archives</a></li><li class="menu-item"><a href="/about.html">About</a></li><li class="menu-item"><a href="/tags">Tags</a></li><li class="menu-item"><a href="/categories">Categories</a></li><li class="menu-item"><a href="/contact.html">Contact</a></li></ul><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="298" height="52" src="//music.163.com/outchain/player?type=0&id=688474010&auto=1&height=32"></iframe></div></div><nav><a href="#menu"></a></nav><div class="container"><div class="row"><div class="col-sm-12"><header><div class="logo"><a href="/"><i class="logo-icon fa fa-codepen" aria-hidden="true"></i></a></div></header><section class="main"><div class="post"><div class="post-header"><h1 class="title"><a href="/对js逻辑运算符的总结.html">对js逻辑运算符的总结</a></h1><div class="post-info"><span class="date">2017-03-30</span><span class="category"><i class="fa fa-tag"></i> <a href="/categories/Javascript/">Javascript</a></span><span class="post-count"><i class="fa fa-pencil-square-o"></i> 本篇共1,177字</span> |<span class="post-count"><i class="fa fa-history"></i> 阅读需要5分钟</span></div></div><div class="content"><h3 id="对js运算符“-”和“-amp-amp-”的总结"><a href="#对js运算符“-”和“-amp-amp-”的总结" class="headerlink" title="对js运算符“||”和“&amp;&amp;”的总结"></a>对js运算符“||”和“&amp;&amp;”的总结</h3><p><strong>首先出个题：</strong></p><p><img src="http://dl.iteye.com/upload/attachment/143005/1ec269a5-d45f-37a3-ab50-6eaaee73e835.jpg" alt="img"><br>假设对成长速度显示规定如下：<br>成长速度为5显示1个箭头；<br>成长速度为10显示2个箭头；<br>成长速度为12显示3个箭头；<br>成长速度为15显示4个箭头；<br>其他都显示都显示0各箭头。<br>用代码怎么实现？<br><a id="more"></a></p><p>差一点的if，else：<br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> add_level = <span class="number">0</span>; </div><div class="line">  </div><div class="line"><span class="keyword">if</span>(add_step == <span class="number">5</span>)&#123;</div><div class="line">    add_level = <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">else</span> <span class="keyword">if</span>(add_step == <span class="number">10</span>)&#123;</div><div class="line">    add_level = <span class="number">2</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">else</span> <span class="keyword">if</span>(add_step == <span class="number">12</span>)&#123;</div><div class="line">    add_level = <span class="number">3</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">else</span> <span class="keyword">if</span>(add_step == <span class="number">15</span>)&#123;</div><div class="line">    add_level = <span class="number">4</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">else</span> &#123;</div><div class="line">    add_level = <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p>稍好些的switch：<br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> add_level = <span class="number">0</span>;</div><div class="line">  </div><div class="line"><span class="keyword">switch</span>(add_step)&#123;</div><div class="line">    <span class="keyword">case</span> <span class="number">5</span> : add_level = <span class="number">1</span>;</div><div class="line">        <span class="keyword">break</span>;  </div><div class="line">    <span class="keyword">case</span> <span class="number">10</span> : add_level = <span class="number">2</span>;</div><div class="line">        <span class="keyword">break</span>;  </div><div class="line">    <span class="keyword">case</span> <span class="number">12</span> : add_level = <span class="number">3</span>;</div><div class="line">        <span class="keyword">break</span>;  </div><div class="line">    <span class="keyword">case</span> <span class="number">15</span> : add_level = <span class="number">4</span>;</div><div class="line">        <span class="keyword">break</span>;  </div><div class="line">    <span class="keyword">default</span> : add_level = <span class="number">0</span>;</div><div class="line">        <span class="keyword">break</span>;  </div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p>如果需求改成：<br>成长速度为&gt;12显示4个箭头；<br>成长速度为&gt;10显示3个箭头；<br>成长速度为&gt;5显示2个箭头；<br>成长速度为&gt;0显示1个箭头；<br>成长速度为&lt;=0显示0个箭头。</p><p>那么用switch实现起来也很麻烦了。</p><p>那么你有没有想过用一行就代码实现呢？<br>ok，让我们来看看js强大的表现力吧：<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> add_level = (add_step==<span class="number">5</span> &amp;&amp; <span class="number">1</span>) || (add_step==<span class="number">10</span> &amp;&amp; <span class="number">2</span>) || (add_step==<span class="number">12</span> &amp;&amp; <span class="number">3</span>) || (add_step==<span class="number">15</span> &amp;&amp; <span class="number">4</span>) || <span class="number">0</span>;</div></pre></td></tr></table></figure><p></p><p>更强大的，也更优的：<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> add_level=&#123;<span class="string">'5'</span>:<span class="number">1</span>,<span class="string">'10'</span>:<span class="number">2</span>,<span class="string">'12'</span>:<span class="number">3</span>,<span class="string">'15'</span>:<span class="number">4</span>&#125;[add_step] || <span class="number">0</span>;</div></pre></td></tr></table></figure><p></p><p>第二个需求：<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> add_level = (add_step&gt;<span class="number">12</span> &amp;&amp; <span class="number">4</span>) || (add_step&gt;<span class="number">10</span> &amp;&amp; <span class="number">3</span>) || (add_step&gt;<span class="number">5</span> &amp;&amp; <span class="number">2</span>) || (add_step&gt;<span class="number">0</span> &amp;&amp; <span class="number">1</span>) || <span class="number">0</span>;</div></pre></td></tr></table></figure><p></p><p>首先我们来梳理一下一个概念，请你一定要记住：在js逻辑运算中，0、””、null、false、undefined、NaN都会判为false，其他都为true（好像没有遗漏了吧，请各位确认下）。这个一定要记住，不然应用||和&amp;&amp;就会出现问题。</p><p>这里顺便提下：经常有人问我，看到很多代码if(!!attr)，为什么不直接写if(attr)；<br>其实这是一种更严谨的写法：<br>请测试 typeof 5和typeof !!5的区别。!!的作用是把一个其他类型的变量转成的bool类型。</p><p>下面主要讨论下逻辑运算符&amp;&amp;和||。</p><p>几乎所有语言中||和&amp;&amp;都遵循“短路”原理，如&amp;&amp;中第一个表达式为假就不会去处理第二个表达式，而||正好相反。<br>js也遵循上述原则。但是比较有意思的是它们返回的值。<br>代码：var attr = true &amp;&amp; 4 &amp;&amp; “aaa”;<br>那么运行的结果attr就不是简单的true或这false，而是”aaa”<br>再来看看||：<br>代码：var attr = attr || “”;这个运算经常用来判断一个变量是否已定义，如果没有定义就给他一个初始值，这在给函数的参数定义一个默认值的时候比较有用。因为js不像php可以直接在型参数上定义func($attr=5)。再次提醒你记住上面的原则：如果实参需要是0、””、null、false、undefined、NaN的时候也会当false来处理。</p><p>if(a &gt;=5){<br>alert(“你好”);<br>}<br>可以写成：<br>a &gt;= 5 &amp;&amp; alert(“你好”);</p><p>这样只需一行代码就搞定。但是需要注意的一点就是：js中||和&amp;&amp;的特性帮我们精简了代码的同时，也带来了代码可读性的降低。这就需要我们自己来权衡了。<br>一方面精简js代码，能实质性的减少网络流量，尤其是大量应用的js公用库。个人比较推荐的做法是：如果是相对复杂的应用，请适当地写一些注释。这个和正在表达式一样，能够精简代码，但是可读性会降低，对读代码的人要求会高些，最好的办法就是写注释。</p><p>我们可以不使用这些技巧，但是我们一定要能看懂，因为这些技巧已经广泛应用，尤其是像JQuery等js框里的代码，不理解这些你就很难看懂别人的代码。<br>像var Yahoo = Yahoo || {};这种是非常广泛应用的。</p><p>ok,最后让我们来看一段jQuery中的代码吧：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> wrap =</div><div class="line">    <span class="comment">// option or optgroup</span></div><div class="line">    !tags.indexOf(<span class="string">"&lt;opt"</span>) &amp;&amp;</div><div class="line">    [ <span class="number">1</span>, <span class="string">"&lt;select multiple='multiple'&gt;"</span>, <span class="string">"&lt;/select&gt;"</span> ] ||</div><div class="line">      </div><div class="line">    !tags.indexOf(<span class="string">"&lt;leg"</span>) &amp;&amp;</div><div class="line">    [ <span class="number">1</span>, <span class="string">"&lt;fieldset&gt;"</span>, <span class="string">"&lt;/fieldset&gt;"</span> ] ||</div><div class="line">      </div><div class="line">    tags.match(<span class="regexp">/^&lt;(thead|tbody|tfoot|colg|cap)/</span>) &amp;&amp;</div><div class="line">    [ <span class="number">1</span>, <span class="string">"&lt;table&gt;"</span>, <span class="string">"&lt;/table&gt;"</span> ] ||</div><div class="line">      </div><div class="line">    !tags.indexOf(<span class="string">"&lt;tr"</span>) &amp;&amp;</div><div class="line">    [ <span class="number">2</span>, <span class="string">"&lt;table&gt;&lt;tbody&gt;"</span>, <span class="string">"&lt;/tbody&gt;&lt;/table&gt;"</span> ] ||</div><div class="line">      </div><div class="line">    <span class="comment">// &lt;thead&gt; matched above</span></div><div class="line">    (!tags.indexOf(<span class="string">"&lt;td"</span>) || !tags.indexOf(<span class="string">"&lt;th"</span>)) &amp;&amp;</div><div class="line">    [ <span class="number">3</span>, <span class="string">"&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;"</span>, <span class="string">"&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;"</span> ] ||</div><div class="line">      </div><div class="line">    !tags.indexOf(<span class="string">"&lt;col"</span>) &amp;&amp;</div><div class="line">    [ <span class="number">2</span>, <span class="string">"&lt;table&gt;&lt;tbody&gt;&lt;/tbody&gt;&lt;colgroup&gt;"</span>, <span class="string">"&lt;/colgroup&gt;&lt;/table&gt;"</span> ] ||</div><div class="line">      </div><div class="line">    <span class="comment">// IE can't serialize &lt;link&gt; and &lt;script&gt; tags normally</span></div><div class="line">    !jQuery.support.htmlSerialize &amp;&amp;</div><div class="line">    [ <span class="number">1</span>, <span class="string">"div&lt;div&gt;"</span>, <span class="string">"&lt;/div&gt;"</span> ] ||</div><div class="line">      </div><div class="line">    [ <span class="number">0</span>, <span class="string">""</span>, <span class="string">""</span> ];</div><div class="line">      </div><div class="line">    <span class="comment">// Go to html and back, then peel off extra wrappers  </span></div><div class="line">    div.innerHTML = wrap[<span class="number">1</span>] + elem + wrap[<span class="number">2</span>];</div><div class="line">      </div><div class="line">    <span class="comment">// Move to the right depth  </span></div><div class="line">    <span class="keyword">while</span> ( wrap[<span class="number">0</span>]-- )</div><div class="line">        div = div.lastChild;</div></pre></td></tr></table></figure><p>这段代码是作者用来处理 $(html) 时，有些标签必须要约束的，如<code>&lt;option&gt;</code>必须在<code>&lt;select&gt;&lt;/select&gt;</code>之内的。<br>可能你也发现了作者还有一个很巧的地方就是 <code>!tags.indexOf(”&lt;opt“)</code>，作者很巧很简单的就实现了startWith的功能了，没有一点多余的代码。jquery源代码中还有很多如此精妙的代码，大家可以去学习学习。</p><div style="text-align:center;padding:32px 0;color:#ccc;font-size:14px">-------------本文到此结束&nbsp;<i class="fa fa-university"></i>&nbsp;感谢您的阅读-------------</div></div><div class="post-tags"><i class="fa fa-tags" aria-hidden="true"></i><a href="/tags/Javascript/"><i class="fa fa-tag"></i> Javascript</a></div><div class="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC8zMzAwNS85NTY3"><script>!function(e,t){var c,n=e.getElementsByTagName("script")[0];"function"!=typeof LivereTower&&((c=e.createElement("script")).src="https://cdn-city.livere.com/js/embed.dist.js",c.async=!0,n.parentNode.insertBefore(c,n))}(document)</script><noscript>为正常使用评论功能请激活JavaScript</noscript></div></div></div></section></div></div></div><div class="push"></div><footer class="footer-content"><div class="container"><div class="row"><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about"><h2>About</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;The world ain’t all sunshine and rainbows. It's a very mean and nasty place and I don't care how tough you are, it will beat you to your knees and keep you there permanently if you let it. You, me or nobody, is gonna hit as hard as life. But it ain’t about how hard you hit.It's about how hard you can get hit and keep moving forward. How much you can take，and keep moving forward!!</p></div><div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts"><h2>Recent Posts</h2><ul><li><a class="footer-post" href="/Python高效编程.html">Python高效编程</a></li><li><a class="footer-post" href="/Python中的天坑-dict.html">Python中的天坑--dict</a></li><li><a class="footer-post" href="/re踩坑之旅.html">re踩坑之旅</a></li><li><a class="footer-post" href="/优雅的Python之fotmat.html">Python 优雅编程之 str.format()</a></li></ul></div><div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 footer-categories"><h2>Categories</h2><ul><li><a class="footer-post" href="/categories/Git/">Git</a></li><li><a class="footer-post" href="/categories/Javascript/">Javascript</a></li><li><a class="footer-post" href="/categories/Python/">Python</a></li></ul></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><ul class="list-inline footer-social-icons"><li class="list-inline-item"><a href="https://github.com/dscdtc/"><span class="footer-icon-container"><i class="fa fa-github"></i></span></a></li><li class="list-inline-item"><a href="dscdtc"><span class="footer-icon-container"><i class="fa fa-weixin"></i></span></a></li><li class="list-inline-item"><a href="mailto:dscdtc@protonmail.com"><span class="footer-icon-container"><i class="fa fa-envelope-o"></i></span></a></li><li class="list-inline-item"><a href="/atom.xml"><span class="footer-icon-container"><i class="fa fa-rss"></i></span></a></li></ul></div></div><div class="row"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><div class="footer-copyright">Copyright ©2018 <a href="https://github.com/dscdtc">dscdtc</a>. All right reserved</div><div class="powered-by"><span id="busuanzi_container_site_pv" style="display:none"><i class="fa fa-users"></i> 恭喜您是第<span id="busuanzi_value_site_uv"></span>位访客 |</span><span id="busuanzi_container_site_pv" style="display:none"><i class="fa fa-thermometer-full"></i> 本站访问量达<span id="busuanzi_value_site_pv"></span>人次 |</span><span class="post-count"><i class="fa fa-user-md"></i> 博客全站共9.3k字</span></div></div></div><div style="display:none"><p>Hosted by <a href="https://pages.coding.me" style="font-weight:700">Coding Pages</a></p></div></div></footer><script src="//code.jquery.com/jquery-2.1.4.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" charset="utf-8"></script><script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="/js/main.js"></script><script src="/js/love.js"></script><canvas class="fireworks" style="position:fixed;left:0;top:0;z-index:1;pointer-events:none"></canvas><script src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script><script src="/js/firework.js"></script><script color="215,236,255" opacity="0.7" zindex="-2" count="99" src="//cdn.bootcss.com/canvas-nest.js/1.0.1/canvas-nest.min.js"></script><div id="hexo-helper-live2d"><canvas id="live2dcanvas" width="150" height="300"></canvas></div><style>#live2dcanvas{position:fixed;width:150px;height:300px;opacity:.7;right:0;z-index:999;pointer-events:none;bottom:20px}</style><script src="/live2d/device.min.js"></script><script>const loadScript = function loadScript(c,b){var a=document.createElement("script");a.type="text/javascript";"undefined"!=typeof b&&(a.readyState?a.onreadystatechange=function(){if("loaded"==a.readyState||"complete"==a.readyState)a.onreadystatechange=null,b()}:a.onload=function(){b()});a.src=c;document.body.appendChild(a)};
(function(){
  if((typeof(device) != 'undefined') && (device.mobile())){
    document.getElementById("live2dcanvas").style.width = '75px';
    document.getElementById("live2dcanvas").style.height = '150px';
  }else
    if (typeof(device) === 'undefined') console.error('Cannot find current-device script.');
  loadScript("/live2d/script.js", function(){loadlive2d("live2dcanvas", "/live2d/assets/miku.model.json", 0.5);});
})();</script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script></body></html>